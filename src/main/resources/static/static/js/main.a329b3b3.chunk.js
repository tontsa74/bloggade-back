(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,a){},,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(9),i=a.n(s),l=(a(16),a(2)),c=a(3),r=a(6),u=a(4),d=a(5),m=a(1),h=(a(17),a(18),a(19),a(20),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onDeleteClick=function(e){e.preventDefault(),a.deletePost()},a.getHeader=a.getHeader.bind(Object(m.a)(Object(m.a)(a))),a.onDeleteClick=a.onDeleteClick.bind(Object(m.a)(Object(m.a)(a))),a.deletePost=a.deletePost.bind(Object(m.a)(Object(m.a)(a))),a.state={id:a.props.id,title:a.props.title,author:a.props.author,description:a.props.description,commentsLength:a.props.commentsLength,onItemClick:a.props.onItemClick,userDetails:a.props.userDetails},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onError",value:function(e){console.log(e)}},{key:"deletePost",value:function(){var e=this;fetch("http://localhost:8080/api/private/admin/delete/"+this.state.id,{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.state.userDetails.token)}}).then(function(t){e.props.updatePosts()}).catch(this.onError)}},{key:"getHeader",value:function(){return"ROLE_ADMIN"===this.state.userDetails.role?o.a.createElement("div",{className:"blog-header"},o.a.createElement("div",{className:"blog-title blog-text blog-title-admin"},this.state.title),o.a.createElement("div",{className:"blog-author blog-text blog-author-admin"},this.state.author),o.a.createElement("div",{className:"blog-delete",onClick:this.onDeleteClick},"DEL")):o.a.createElement("div",{className:"blog-header"},o.a.createElement("div",{className:"blog-title blog-text"},this.state.title),o.a.createElement("div",{className:"blog-author blog-text"},this.state.author))}},{key:"render",value:function(){var e=this.getHeader();return o.a.createElement("div",{className:"blog-post",key:this.state.id},e,o.a.createElement("div",{className:"blog-content"},o.a.createElement("div",{className:"blog-description blog-text"},this.state.description),o.a.createElement("div",{className:"blog-link-container"},o.a.createElement("div",{id:this.state.id,className:"blog-link blog-text",onClick:this.state.onItemClick},"Read more..."))),o.a.createElement("div",{className:"blog-footer"},o.a.createElement("div",{className:"blog-comments blog-text"},"Comments: ",this.state.commentsLength)))}}]),t}(n.Component)),g=(a(21),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onInputChange=function(e){e.preventDefault(),a.setState({keyword:e.target.value})},a.onInputChange=a.onInputChange.bind(Object(m.a)(Object(m.a)(a))),a.state={keyword:"",onSearchClick:a.props.onSearchClick},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header-container"},o.a.createElement("div",{className:"search-container"},o.a.createElement("div",{className:"search-input-container"},o.a.createElement("input",{type:"text",className:"input-search",onChange:this.onInputChange})),o.a.createElement("div",{className:"search-button-container"},o.a.createElement("button",{className:"button-search",onClick:this.state.onSearchClick,value:this.state.keyword},"Search"))))}}]),t}(n.Component)),b=(a(8),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onDeleteClick=function(e){e.preventDefault(),a.deleteComment(e.target.id)},a.onDeleteClick=a.onDeleteClick.bind(Object(m.a)(Object(m.a)(a))),a.deleteComment=a.deleteComment.bind(Object(m.a)(Object(m.a)(a))),a.state={comments:a.props.comments,updatePosts:a.props.updatePosts,userDetails:a.props.userDetails},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"deleteComment",value:function(e){var t=this;fetch("http://localhost:8080/api/private/admin/delete/comment/"+e,{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.state.userDetails.token)}}).then(function(e){t.state.updatePosts()}).catch(this.onError)}},{key:"onError",value:function(e){console.log(e)}},{key:"render",value:function(){var e,t=this,a=this.state.comments;return e="ROLE_ADMIN"===this.state.userDetails.role?a.map(function(e){return o.a.createElement("div",{className:"blog-article-content blog-text"},e.text,o.a.createElement("div",{className:"blog-delete-comment",onClick:t.onDeleteClick,id:e.id},"DEL"))}):a.map(function(e){return o.a.createElement("div",{className:"blog-article-content blog-text"},e.text)}),o.a.createElement("div",null,e)}}]),t}(n.Component)),p=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onEditClick=function(e){e.preventDefault(),a.setState({isEditing:!0})},a.onSubmitClick=function(e){e.preventDefault(),a.state.isEditing&&a.state.isCreating?a.createNewPost():a.state.isEditing&&!a.state.isCreating&&a.savePostEdit()},a.onPostCommentClick=function(e){e.preventDefault(),a.saveComment()},a.onTextChange=function(e){e.preventDefault(),"blog-title"===e.target.name?a.setState({title:e.target.value}):"blog-author"===e.target.name?a.setState({author:e.target.value}):"blog-content"===e.target.name?a.setState({content:e.target.value}):"blog-description"===e.target.name?a.setState({description:e.target.value}):"blog-comment"===e.target.name&&a.setState({blogComment:e.target.value})},a.getHeader=a.getHeader.bind(Object(m.a)(Object(m.a)(a))),a.onEditClick=a.onEditClick.bind(Object(m.a)(Object(m.a)(a))),a.onSubmitClick=a.onSubmitClick.bind(Object(m.a)(Object(m.a)(a))),a.onTextChange=a.onTextChange.bind(Object(m.a)(Object(m.a)(a))),a.savePostEdit=a.savePostEdit.bind(Object(m.a)(Object(m.a)(a))),a.saveComment=a.saveComment.bind(Object(m.a)(Object(m.a)(a))),a.createNewPost=a.createNewPost.bind(Object(m.a)(Object(m.a)(a))),a.addComment=a.addComment.bind(Object(m.a)(Object(m.a)(a))),a.props.create?a.state={id:-1,title:"",author:"",description:"",content:"",changeMode:a.props.changeMode,userDetails:a.props.userDetails,isEditing:!0,updatePosts:a.props.updatePosts,isCreating:!0,blogComment:""}:a.state={id:a.props.id,title:a.props.title,author:a.props.author,description:a.props.description,content:a.props.content,changeMode:a.props.changeMode,userDetails:a.props.userDetails,isEditing:!1,updatePosts:a.props.updatePosts,blogComment:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onError",value:function(e){console.log(e)}},{key:"createNewPost",value:function(){var e=this,t={id:this.state.id,userName:this.state.author,blogTitle:this.state.title,blogDescription:this.state.description,blogText:this.state.content};fetch("http://localhost:8080/api/private/admin/add",{method:"POST",headers:{Authorization:"Bearer ".concat(this.state.userDetails.token),"Content-type":"application/json"},body:JSON.stringify(t),dataType:"json"}).then(function(t){e.state.updatePosts(),e.setState({isEditing:!1,isCreating:!1})}).catch(this.onError)}},{key:"savePostEdit",value:function(){var e=this,t={id:this.state.id,userName:this.state.author,blogTitle:this.state.title,blogDescription:this.state.description,blogText:this.state.content};fetch("http://localhost:8080/api/private/admin/edit",{method:"PUT",headers:{Authorization:"Bearer ".concat(this.state.userDetails.token),"Content-type":"application/json"},body:JSON.stringify(t),dataType:"json"}).then(function(t){e.state.updatePosts(),e.setState({isEditing:!1})}).catch(this.onError)}},{key:"saveComment",value:function(){var e=this,t={id:this.state.id,text:this.state.blogComment};fetch("http://localhost:8080/api/private/user/comment",{method:"POST",headers:{Authorization:"Bearer ".concat(this.state.userDetails.token),"Content-type":"application/json"},body:JSON.stringify(t),dataType:"json"}).then(function(t){e.state.updatePosts(),e.setState({blogComment:""})}).catch(this.onError)}},{key:"getHeader",value:function(){return"ROLE_ADMIN"===this.state.userDetails.role?this.state.isEditing?o.a.createElement("div",{className:"blog-article-header blog-text"},o.a.createElement("div",{className:"blog-article-title"},o.a.createElement("input",{type:"text",name:"blog-title",value:this.state.title,onChange:this.onTextChange})),o.a.createElement("div",{className:"blog-article-author"},o.a.createElement("input",{type:"text",name:"blog-author",value:this.state.author,onChange:this.onTextChange})),o.a.createElement("div",{className:"blog-article-submit",onClick:this.onSubmitClick},"SUB",o.a.createElement("br",null),"MIT")):o.a.createElement("div",{className:"blog-article-header blog-text"},o.a.createElement("div",{className:"blog-article-title"},this.state.title),o.a.createElement("div",{className:"blog-article-author"},this.state.author),o.a.createElement("div",{className:"blog-article-edit",onClick:this.onEditClick},"EDIT")):o.a.createElement("div",{className:"blog-article-header blog-text"},o.a.createElement("div",{className:"blog-article-title"},this.state.title),o.a.createElement("div",{className:"blog-article-author"},this.state.author))}},{key:"addComment",value:function(){return"ROLE_USER"===this.state.userDetails.role||"ROLE_ADMIN"===this.state.userDetails.role?o.a.createElement("div",null,o.a.createElement("div",{className:"blog-article-content blog-text"},o.a.createElement("div",{className:"blog-article-textarea-header"},"Write a comment",o.a.createElement("div",{className:"blog-comment-send",onClick:this.onPostCommentClick},"SEND")),o.a.createElement("textarea",{className:"blog-article-comment",cols:"",rows:"5",name:"blog-comment",value:this.state.blogComment,onChange:this.onTextChange}))):o.a.createElement("div",null,"Login to comment")}},{key:"render",value:function(){var e=this,t=this.props.findCommentsByBlogPostId(this.state.id),a=this.getHeader(),n=this.addComment();return this.state.isEditing?o.a.createElement("div",{className:"blog-article"},o.a.createElement("div",{className:"action-bar"},o.a.createElement("div",{className:"exit-link blog-text",onClick:function(){return e.state.changeMode("exit-article")}},"Back to browsing")),a,o.a.createElement("div",{className:"blog-article-content blog-text"},o.a.createElement("div",{className:"blog-article-textarea-header"},"Description"),o.a.createElement("textarea",{className:"blog-article-description",cols:"",rows:"5",name:"blog-description",value:this.state.description,onChange:this.onTextChange}),o.a.createElement("div",{className:"blog-article-textarea-header"},"Content"),o.a.createElement("textarea",{className:"blog-article-textarea",cols:"",rows:"30",name:"blog-content",value:this.state.content,onChange:this.onTextChange}))):o.a.createElement("div",null,o.a.createElement("div",{className:"blog-article"},o.a.createElement("div",{className:"action-bar"},o.a.createElement("div",{className:"exit-link blog-text",onClick:function(){return e.state.changeMode("exit-article")}},"Back to browsing")),a,o.a.createElement("div",{className:"blog-article-content blog-text"},this.state.content)),o.a.createElement("div",null,n),o.a.createElement("div",null,o.a.createElement(b,{comments:t,updatePosts:this.state.updatePosts,userDetails:this.state.userDetails})))}}]),t}(n.Component),v=(a(22),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){e.preventDefault(),"username"===e.target.name?a.setState({username:e.target.value}):"password"===e.target.name&&a.setState({password:e.target.value})},a.onSubmit=function(e){e.preventDefault(),void 0!==a.props.changeMode&&a.props.changeMode("do-login"),a.props.onLogin(a.state.username,a.state.password)},a.onSubmit=a.onSubmit.bind(Object(m.a)(Object(m.a)(a))),a.onError=a.onError.bind(Object(m.a)(Object(m.a)(a))),a.state={username:"",password:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onError",value:function(e){console.log(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"page-container"},o.a.createElement("div",{className:"login-dialog"},o.a.createElement("div",{className:"login-header"},o.a.createElement("h1",null,"Login")),o.a.createElement("div",{className:"input-container"},o.a.createElement("table",{className:"input-grid"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"input-row"},o.a.createElement("td",null,o.a.createElement("label",{className:"input-label"},"Username:")),o.a.createElement("td",null,o.a.createElement("input",{className:"input-field",type:"text",name:"username",onChange:this.handleChange,value:this.state.username}))),o.a.createElement("tr",{className:"input-row"},o.a.createElement("td",null,o.a.createElement("label",{className:"input-label"},"Password:")),o.a.createElement("td",null,o.a.createElement("input",{className:"input-field",type:"password",name:"password",onChange:this.handleChange,value:this.state.password}))))),o.a.createElement("div",{className:"submit-input"},o.a.createElement("button",{className:"login-button",onClick:this.onSubmit},"Login")))))}}]),t}(n.Component)),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),a.state.password===a.state.confirmPassword&&a.props.onSignUp(a.state.username,a.state.password)},a.handleChange=function(e){switch(e.preventDefault(),e.target.name){case"username":a.setState({username:e.target.value});break;case"password":a.setState({password:e.target.value});break;case"confirm_password":a.setState({confirmPassword:e.target.value})}},a.onSubmit=a.onSubmit.bind(Object(m.a)(Object(m.a)(a))),a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.state={username:"",password:"",confirmPassword:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-container"},o.a.createElement("div",{className:"login-dialog"},o.a.createElement("div",{className:"login-header"},o.a.createElement("h1",null,"Sign Up")),o.a.createElement("div",{className:"input-container"},o.a.createElement("table",{className:"input-grid"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"input-row"},o.a.createElement("td",null,o.a.createElement("label",{className:"input-label"},"Username:")),o.a.createElement("td",null,o.a.createElement("input",{className:"input-field",type:"text",name:"username",onChange:this.handleChange,value:this.state.username}))),o.a.createElement("tr",{className:"input-row"},o.a.createElement("td",null,o.a.createElement("label",{className:"input-label"},"Password:")),o.a.createElement("td",null,o.a.createElement("input",{className:"input-field",type:"password",name:"password",onChange:this.handleChange,value:this.state.password}))),o.a.createElement("tr",{className:"input-row"},o.a.createElement("td",null,o.a.createElement("label",{className:"input-label"},"Confirm password:")),o.a.createElement("td",null,o.a.createElement("input",{className:"input-field",type:"password",name:"confirm_password",onChange:this.handleChange,value:this.state.confirmPassword}))))),o.a.createElement("div",{className:"submit-input"},o.a.createElement("button",{className:"login-button",onClick:this.onSubmit},"Sign up")))))}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onSearchClick=function(e){e.preventDefault(),a.setState({blogObjects:[],posts:[]}),a.fetchBlogPostsByKeyword(e.target.value)},a.onItemClick=function(e){e.preventDefault();var t=a.findBlogPostById(e.target.id);a.setState({mode:"read",article:o.a.createElement(p,{userDetails:a.state.userDetails,id:t.id,title:t.blogTitle,author:t.userName,description:t.blogDescription,content:t.blogText,changeMode:a.changeMode,updatePosts:a.updateBlogList,findCommentsByBlogPostId:a.findCommentsByBlogPostId})})},a.onCreateClick=function(e){e.preventDefault(),a.setState({mode:"create",article:o.a.createElement(p,{userDetails:a.state.userDetails,changeMode:a.changeMode,updatePosts:a.updateBlogList,create:!0,findCommentsByBlogPostId:a.findCommentsByBlogPostId})})},a.goToLogin=function(e){e.preventDefault(),a.setState({mode:"login"})},a.doLogout=function(e){e.preventDefault(),a.props.loginActions.handleLogout()},a.goToSignUp=function(e){e.preventDefault(),a.setState({mode:"sign-up"})},a.fetchBlogPosts=a.fetchBlogPosts.bind(Object(m.a)(Object(m.a)(a))),a.fetchBlogPostsByKeyword=a.fetchBlogPostsByKeyword.bind(Object(m.a)(Object(m.a)(a))),a.buildBlogPosts=a.buildBlogPosts.bind(Object(m.a)(Object(m.a)(a))),a.onSuccess=a.onSuccess.bind(Object(m.a)(Object(m.a)(a))),a.onSearchClick=a.onSearchClick.bind(Object(m.a)(Object(m.a)(a))),a.onItemClick=a.onItemClick.bind(Object(m.a)(Object(m.a)(a))),a.changeMode=a.changeMode.bind(Object(m.a)(Object(m.a)(a))),a.updateBlogList=a.updateBlogList.bind(Object(m.a)(Object(m.a)(a))),a.onCreateClick=a.onCreateClick.bind(Object(m.a)(Object(m.a)(a))),a.getLoginButton=a.getLoginButton.bind(Object(m.a)(Object(m.a)(a))),a.findCommentsByBlogPostId=a.findCommentsByBlogPostId.bind(Object(m.a)(Object(m.a)(a))),a.state={url:"http://localhost:8080/api/public/blogposts",blogObjects:[],posts:[],mode:"browse",userDetails:a.props.userDetails,isLoading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateBlogList()}},{key:"updateBlogList",value:function(){this.setState({posts:[],blogObjects:[],isLoading:!0}),this.fetchBlogPosts()}},{key:"fetchBlogPosts",value:function(){fetch(this.state.url).then(function(e){return e.json()}).then(this.onSuccess)}},{key:"fetchBlogPostsByKeyword",value:function(e){fetch(this.state.url+"/search?keyword="+e).then(function(e){return e.json()}).then(this.onSuccess)}},{key:"onSuccess",value:function(e){var t=[],a=!0,n=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var l=s.value;t.push(l)}}catch(c){n=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}this.buildBlogPosts(t)}},{key:"buildBlogPosts",value:function(e){var t=[],a=!0,n=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var c=i.value;t.push(o.a.createElement(h,{userDetails:this.state.userDetails,id:c.id,title:c.blogTitle,author:c.userName,description:c.blogDescription,onItemClick:this.onItemClick,updatePosts:this.updateBlogList,commentsLength:c.comments.length}))}}catch(r){n=!0,s=r}finally{try{a||null==l.return||l.return()}finally{if(n)throw s}}this.setState({posts:t,blogObjects:e,isLoading:!1})}},{key:"findBlogPostById",value:function(e){var t=null;e=parseInt(e);var a=!0,n=!1,o=void 0;try{for(var s,i=this.state.blogObjects[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var l=s.value;l.id===e&&(t=l)}}catch(c){n=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"findCommentsByBlogPostId",value:function(e){return-1===e?null:this.findBlogPostById(e).comments}},{key:"changeMode",value:function(e){"exit-article"!==e&&"do-login"!==e||this.setState({mode:"browse"})}},{key:"getLoginButton",value:function(){var e=o.a.createElement("div",{className:"blog-login-button",onClick:this.goToLogin.bind(this)},"LOG",o.a.createElement("br",null),"IN");return"ROLE_ADMIN"!==this.state.userDetails.role&&"ROLE_USER"!==this.state.userDetails.role||(e=o.a.createElement("div",{className:"blog-login-button",onClick:this.doLogout.bind(this)},"LOG",o.a.createElement("br",null),"OUT")),e}},{key:"render",value:function(){if(this.state.isLoading)return o.a.createElement("div",null,"Loading...");var e=this.state.posts;if("read"===this.state.mode||"create"===this.state.mode)e=this.state.article;else{if("login"===this.state.mode)return o.a.createElement("div",{className:"blog-container"},o.a.createElement(v,{onLogin:this.props.loginActions.tryLogin,changeMode:this.changeMode}));if("sign-up"===this.state.mode)return o.a.createElement("div",{className:"blog-container"},o.a.createElement(E,{onSignUp:this.props.loginActions.trySignUp}))}var t=o.a.createElement("div",{className:"blog-list-action-bar",onClick:this.onCreateClick},"CREATE POST");return"ROLE_ADMIN"===this.state.userDetails.role?"read"===this.state.mode||"create"===this.state.mode?o.a.createElement("div",{className:"blog-container"},o.a.createElement("div",{className:"blog-action-button-container"},this.getLoginButton()),o.a.createElement(g,{onSearchClick:this.onSearchClick}),e):o.a.createElement("div",{className:"blog-container"},o.a.createElement("div",{className:"blog-action-button-container"},this.getLoginButton()),o.a.createElement(g,{onSearchClick:this.onSearchClick}),t,e):"ROLE_USER"===this.state.userDetails.role?o.a.createElement("div",{className:"blog-container"},o.a.createElement("div",{className:"blog-action-button-container"},this.getLoginButton()),o.a.createElement(g,{onSearchClick:this.onSearchClick}),e):o.a.createElement("div",{className:"blog-container"},o.a.createElement("div",{className:"blog-action-button-container"},this.getLoginButton(),o.a.createElement("div",{className:"blog-sign-up-button",onClick:this.goToSignUp.bind(this)},"SIGN",o.a.createElement("br",null),"UP")),o.a.createElement(g,{onSearchClick:this.onSearchClick}),e)}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={mode:"browse",userDetails:a.props.userDetails},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-container"},o.a.createElement("div",{className:"left-sidebar"}),o.a.createElement(f,{userDetails:this.state.userDetails,loginActions:this.props.loginActions}),o.a.createElement("div",{className:"right-sidebar"}))}}]),t}(n.Component),O=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(u.a)(t).call(this))).anonUser={roles:["ANYNOMOUS"],token:""},e.handleLogin=e.handleLogin.bind(Object(m.a)(Object(m.a)(e))),e.tryLogin=e.tryLogin.bind(Object(m.a)(Object(m.a)(e))),e.handleLogout=e.handleLogout.bind(Object(m.a)(Object(m.a)(e))),e.trySignUp=e.trySignUp.bind(Object(m.a)(Object(m.a)(e))),e.state={loggedIn:!0,isLoading:!1,userDetails:{},loginActions:{tryLogin:e.tryLogin,handleLogout:e.handleLogout,trySignUp:e.trySignUp}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("accessToken")&&this.handleLogin()}},{key:"tryLogin",value:function(e,t){var a=this,n={userName:e,password:t};fetch("http://localhost:8080/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(n),dataType:"json"}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("accessToken",e.accessToken),a.handleLogin()}).catch(this.onError)}},{key:"handleLogin",value:function(){var e=this,t=localStorage.getItem("accessToken");this.setState({isLoading:!0}),fetch("http://localhost:8080/api/auth/users/details",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(a){a.user.token=t,e.setState({loggedIn:!0,userDetails:a.user,isLoading:!1})}).catch(function(t){console.log(t),e.setState({loggedIn:!1,userDetails:e.anonUser,isLoading:!1})})}},{key:"handleLogout",value:function(e){var t=this;this.setState({loggedIn:!1,userDetails:this.anonUser},function(){localStorage.removeItem("accessToken"),t.handleLogin()})}},{key:"trySignUp",value:function(e,t){var a=this,n={userName:e,password:t};fetch("http://localhost:8080/api/auth/register",{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(n),dataType:"json"}).then(function(n){a.tryLogin(e,t)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement("div",{className:"App"},o.a.createElement("p",null,"Loading...")):o.a.createElement("div",{className:"App"},o.a.createElement(C,{userDetails:this.state.userDetails,loginActions:this.state.loginActions}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.a329b3b3.chunk.js.map